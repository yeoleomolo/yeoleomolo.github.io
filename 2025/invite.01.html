<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>여러모로합창단 2회 정기공연 · 감사의 초대</title>

  <!-- Open Graph / Link Preview -->
  <meta property="og:type" content="website">
  <meta property="og:title" content="여러모로합창단 2회 정기공연 · 감사의 초대">
  <meta property="og:description" content="함께해주신 모든 분들께 드리는 작고 단단한 감사의 마음. 공연 정보와 참석 회신(눌러서 RSVP)까지 한 곳에서.">
  <!-- TODO: 아래 이미지를 실제 경로로 교체하세요 (1200x630 권장) -->
  <meta property="og:image" content="https://example.com/og/yeoleomolo_1200x630.png">
  <meta property="og:url" content="https://thx.example.com/">
  <meta name="twitter:card" content="summary_large_image">

  <!-- Favicon (선택) -->
  <link rel="icon" href="/favicon.ico">

  <style>
    :root{$1 --col-left:1.15fr; --col-right:1fr;}
    *{box-sizing:border-box}
    html,body{margin:0;height:100%;background:var(--bg);color:var(--ink);font-family: ui-sans-serif,system-ui,-apple-system,"Noto Sans KR","Apple SD Gothic Neo",Segoe UI,Roboto,Helvetica,Arial,sans-serif}
    a{color:inherit}
    .wrap{max-width:980px;margin:0 auto;padding:24px}
    header{
      display:flex;gap:16px;align-items:center;justify-content:space-between;flex-wrap:wrap;
      padding:12px 0 8px 0;border-bottom:1px solid #e6e6e6
    }
    .brand{display:flex;align-items:center;gap:12px}
    .logo{width:40px;height:40px;border-radius:10px;background:linear-gradient(135deg,var(--brand),#96d19f)}
    h1{font-size:22px;margin:0;letter-spacing:-.3px}
    .lead{font-size:14px;color:var(--sub)}

    .hero{display:grid;grid-template-columns:var(--col-left) var(--col-right);gap:20px;margin:24px 0 8pxgap:20px;margin:24px 0 8px}
    @media (max-width:860px){.hero{grid-template-columns:1fr}}

    .card{background:white;border-radius:18px;box-shadow:var(--shadow);overflow:hidden}
    .card img{width:100%;display:block;height:auto}

    .content{padding:18px 18px 20px}
    .content h2{margin:0 0 10px;font-size:20px}
    .kv{border-radius:16px;overflow:hidden}

    .info{display:grid;grid-template-columns:1fr 1fr;gap:16px;margin:18px 0}
    @media (max-width:640px){.info{grid-template-columns:1fr}}
    .info .i{background:white;border-radius:16px;padding:14px 16px;box-shadow:var(--shadow)}
    .info .i strong{display:block;font-size:14px;color:var(--sub);margin-bottom:6px}
    .info .i span{font-size:16px}

    .cta{display:flex;flex-wrap:wrap;gap:10px;margin-top:14px}
    .btn{appearance:none;border:none;border-radius:14px;padding:12px 14px;font-weight:700;cursor:pointer}
    .btn-primary{background:var(--brand);color:white}
    .btn-ghost{background:white;box-shadow:var(--shadow)}
    .btn-outline{background:transparent;border:1.5px solid var(--ink)}

    .grid{display:grid;grid-template-columns:var(--col-left) var(--col-right);gap:20px;margin:16px 0gap:20px;margin:16px 0}
    @media (max-width:860px){.grid{grid-template-columns:1fr}}

    footer{margin:24px 0 40px;color:var(--sub);font-size:12px}
    .copybox{display:flex;gap:10px;align-items:center}
    .small{font-size:12px;color:var(--sub)}
    .muted{color:#888}

    .rsvp-note{font-size:13px;color:var(--sub);margin-top:6px}

    /* 프린트용 */
    @media print{
      header,.cta,.share,.rsvp-note{display:none}
      body{background:white}
      .wrap{max-width:100%;padding:0}
      .grid{gap:0}
      .card{border-radius:0;box-shadow:none}
    }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="brand">
        <div class="logo" aria-hidden="true"></div>
        <div>
          <h1>여러모로합창단 · 정기공연 초대</h1>
          <div class="lead">함께 해주신 단체·개인께 드리는 감사의 인사와 초대장</div>
        </div>
      </div>
      <div class="share">
        <button class="btn btn-ghost" id="shareBtn" title="링크 공유">공유하기</button>
        <button class="btn btn-ghost" id="copyBtn" title="링크 복사">링크 복사</button>
      </div>
    </header>

    <section class="hero">
      <div class="card kv">
        <!-- 1페이지 이미지: 실제 배포 경로로 교체하세요 -->
        <img src="./assets/img/yeoleomolo.2025.page1.png" alt="정기공연 포스터 1" loading="lazy">
      </div>
      <div class="card">
        <div class="content">
          <h2>초대의 말</h2>
          <p>한창단과 함께 해주시는 분들께, 영상이나 글로 다 담지 못한 감사와 연대의 마음을 초대장에 담았습니다. 여러모로 2회 정기공연에 오셔서 지금처럼 든든히 어깨 걸어주세요.</p>

          <div class="info">
            <div class="i"><strong>일시</strong><span id="evDate">2025년 8월 22일(금) 오후 7시</span></div>
            <div class="i"><strong>장소</strong><span id="evVenue">향린교회 2층 대예배실</span></div>
          </div>

          <div class="cta">
            <button class="btn btn-primary" id="rsvpBtn">참석 의사 전하기</button>
            <button class="btn btn-ghost" id="addCalBtn">캘린더에 추가(.ics)</button>
            <a class="btn btn-outline" href="https://maps.google.com/?q=%ED%96%A5%EB%A6%B0%EA%B5%90%ED%9A%8C" target="_blank" rel="noopener">장소 보기(지도)</a>
          </div>
          <div class="rsvp-note">※ 단체/개인마다 다른 링크로 접근하셨다면, 회신에 자동으로 식별자(rid)가 포함됩니다.</div>
        </div>
      </div>
    </section>

    <section class="grid">
      <div class="card"><img src="./assets/img/yeoleomolo.2025.page2.png" alt="정기공연 포스터 2" loading="lazy"></div>
      <div class="card">
        <div class="content">
          <h2>#저희는 외롭지 않습니다</h2>
          <p>평화의 나무합창단, 416합창단, 종합예술단 봄날… 함께 노래해주시는 모든 분들 덕에 우리는 외롭지 않습니다. 오늘의 무대는 그 감사의 마음을 모아 만든 자리입니다.</p>
          <h2 style="margin-top:16px">#저희는 든든합니다</h2>
          <p>여러모로가 가는 길에 공감하고 곡을 빚어주신 작곡가 분들 덕분에 저희는 든든합니다.</p>
          <h2 style="margin-top:16px">#늘 고맙습니다</h2>
          <p>소중한 연습공간을 허락해주신 도선교 가족 여러분께 깊이 감사드립니다.</p>
        </div>
      </div>
    </section>

    <footer>
      <div class="copybox">
        <div class="small">© 2025 여러모로합창단</div>
        <div class="small muted">문의: <a href="mailto:contact@example.com">contact@example.com</a> · 010-0000-0000</div>
      </div>
    </footer>
  </div>

  <script>
    // 1) rid(수신자 식별자) 파라미터 저장 및 사용
    const u = new URL(location.href);
    const rid = u.searchParams.get('rid');
    if (rid) localStorage.setItem('rid', rid);

    // 2) Web Share API & 링크 복사
    const shareBtn = document.getElementById('shareBtn');
    const copyBtn = document.getElementById('copyBtn');
    shareBtn?.addEventListener('click', async () => {
      try{
        if (navigator.share){
          await navigator.share({title: document.title, text: '여러모로합창단 정기공연 초대', url: location.href});
        } else {
          await navigator.clipboard.writeText(location.href);
          alert('링크가 복사되었습니다');
        }
      }catch(e){console.warn(e)}
    });
    copyBtn?.addEventListener('click', async () => {
      await navigator.clipboard.writeText(location.href);
      alert('링크가 복사되었습니다');
    });

    // 3) RSVP: mailto 예시 (원하시면 폼/서버엔드로 교체)
    document.getElementById('rsvpBtn')?.addEventListener('click', () => {
      const subject = encodeURIComponent('정기공연 참석 회신');
      const body = encodeURIComponent(`안녕하세요,\n\n아래와 같이 회신드립니다.\n\n- 성함/단체명: \n- 인원: \n- 메모: \n\nrid: ${localStorage.getItem('rid')||''}`);
      location.href = `mailto:contact@example.com?subject=${subject}&body=${body}`;
    });

    // 4) 캘린더 .ics 생성(클라이언트) — UTC 시간으로 작성
    document.getElementById('addCalBtn')?.addEventListener('click', () => {
      // TODO: 실제 공연 시간대에 맞춰 수정하세요 (아래는 KST 2025-08-22 19:00 → UTC 10:00 가정)
      const dtStart = '20250822T100000Z';
      const dtEnd   = '20250822T120000Z';
      const ics = `BEGIN:VCALENDAR\nVERSION:2.0\nPRODID:-//Yeoleomolo Choir//Invite//KR\nCALSCALE:GREGORIAN\nBEGIN:VEVENT\nUID:${Date.now()}@thx.example.com\nDTSTAMP:${new Date().toISOString().replace(/[-:]/g,'').replace(/\..+/,'Z')}\nDTSTART:${dtStart}\nDTEND:${dtEnd}\nSUMMARY:여러모로합창단 제2회 정기공연\nLOCATION:향린교회 2층 대예배실\nDESCRIPTION:함께해주신 모든 분들께 드리는 감사의 무대\nEND:VEVENT\nEND:VCALENDAR`;
      const blob = new Blob([ics], {type:'text/calendar'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url; a.download = 'yeoleomolo_invite.ics';
      document.body.appendChild(a); a.click(); a.remove();
      URL.revokeObjectURL(url);
    });

    // 5) GA4/Matomo 등 분석툴을 쓰는 경우, rid를 이벤트로 전송하세요 (예시)
    // if (window.gtag){ gtag('event','landing_view',{rid: localStorage.getItem('rid')||'(none)'}); }
  </script>

  <!-- 구조화 데이터: 이벤트(검색/캘린더 친화) -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "MusicEvent",
    "name": "여러모로합창단 제2회 정기공연",
    "startDate": "2025-08-22T19:00:00+09:00",
    "endDate": "2025-08-22T21:00:00+09:00",
    "eventAttendanceMode": "https://schema.org/OfflineEventAttendanceMode",
    "eventStatus": "https://schema.org/EventScheduled",
    "location": {
      "@type": "Place",
      "name": "향린교회 2층 대예배실",
      "address": {
        "@type": "PostalAddress",
        "addressCountry": "KR"
      }
    },
    "image": [
      "https://example.com/og/yeoleomolo_1200x630.png"
    ],
    "description": "함께해주신 단체·개인께 드리는 감사의 인사와 공연 초대",
    "organizer": {"@type":"Organization","name":"여러모로합창단"}
  }
  </script>
</body>
</html>
